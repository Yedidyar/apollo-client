---
title: Hooks (experimental)
description: Apollo Client experimental react hooks API reference
---

import UseSuspenseQueryOptions from '../../../shared/useSuspenseQuery-options.mdx';
import UseBackgroundQueryOptions from '../../../shared/useBackgroundQuery-options.mdx';
import UseSuspenseQueryResult from '../../../shared/useSuspenseQuery-result.mdx';
import UseBackgroundQueryResult from '../../../shared/useBackgroundQuery-result.mdx';
import UseReadQueryResult from '../../../shared/useReadQuery-result.mdx';

## `useBackgroundQuery` and `useReadQuery`

### Installation

> ⚠️ **The `useBackgroundQuery` and `useReadQuery` hooks are currently at the [beta stage](https://www.apollographql.com/docs/resources/product-launch-stages/#alpha--beta) in Apollo Client.** If you have feedback on them, please let us know via [GitHub issues](https://github.com/apollographql/apollo-client/issues/new?assignees=&labels=&template=bug.md).

Apollo Client has beta support for the `useBackgroundQuery` and `useReadQuery` hooks, which work with React's [Suspense](https://react.dev/reference/react/Suspense) feature. You can install it via `npm install @apollo/client@beta`.

### Using `useBackgroundQuery` and `useReadQuery`

Create and provide a `SuspenseCache` instance to your `ApolloProvider`.

```js
import { SuspenseCache } from '@apollo/client';

const suspenseCache = new SuspenseCache();

<ApolloProvider suspenseCache={suspenseCache} />;
```

`useBackgroundQuery` allows a user to initiate a query outside of the component that will read and render the data with `useReadQuery`, which triggers the nearest Suspense boundary while the query is pending. This means a query can be initiated higher up in the React render tree and your application can begin requesting data before the component that has a dependency on that data begins rendering.

Ensure the component tree that uses `useReadQuery` is wrapped with React's [`Suspense`](https://react.dev/reference/react/Suspense) component. Note that the `useReadQuery` hook returns only `data`, `error` and `networkStatus` (though `networkStatus` should rarely be needed). Since Suspense provides the tools to manage our application's loading states, `useReadQuery` does not return a `loading` boolean.

See the API references for [`useBackgroundQuery`](#usebackgroundquery-api) and [`useReadQuery`](#usereadquery-api) for supported options.

```jsx
import { Suspense } from 'react';
import {
  ApolloClient,
  InMemoryCache,
  SuspenseCache,
  useBackgroundQuery,
  useReadQuery,
} from '@apollo/client';

const query = gql`
  foo {
    bar
  }
`;

const suspenseCache = new SuspenseCache();

const client = new ApolloClient({
  uri: "http://localhost:4000/graphql",
  cache: new InMemoryCache()
});

function SuspenseFallback() {
  return <div>Loading...</div>;
}

function Child({ queryRef }) {
  const { data } = useReadQuery(queryRef);

  return <div>{data.foo.bar}</div>;
}

function Parent() {
  const [queryRef] = useBackgroundQuery(query);

  return (
    <Suspense fallback={<SuspenseFallback />}>
      <Child queryRef={queryRef} />
    </Suspense>
  );
}

function App() {
  return (
    <ApolloProvider client={client} suspenseCache={suspenseCache}>
      <ErrorBoundary fallback={<div>Error</div>}>
        <Parent />
      </ErrorBoundary>
    </ApolloProvider>
  );
}

```

### `useBackgroundQuery` API

#### Function Signature

```ts
function useBackgroundQuery<
  TData = any,
  TVariables extends OperationVariables = OperationVariables
>(
  query: DocumentNode | TypedDocumentNode<TData, TVariables>,
  options: BackgroundQueryHookOptions<TData, TVariables>,
): UseBackgroundQueryResult<TData> {}
```

#### Params

##### `query`

| Param   | Type         | Description                                                   |
| ------- | ------------ | ------------------------------------------------------------- |
| `query` | DocumentNode | A GraphQL query document parsed into an AST by `gql`. |


##### `options`

<UseBackgroundQueryOptions />

#### Result

<UseBackgroundQueryResult />

### `useReadQuery` API

#### Function Signature

```ts
function useReadQuery<TData>(
  queryRef: QueryReference<TData>
): {
  data: TData;
  networkStatus: NetworkStatus;
  error: ApolloError | undefined;
} {}
```

#### Params

##### `queryRef`

| Param   | Type         | Description                                                   |
| ------- | ------------ | ------------------------------------------------------------- |
| `queryRef` | QueryReference | The [`queryRef`](#queryref) that was generated via `useBackgroundQuery`. |

#### Result

<UseReadQueryResult />

## `useSuspenseQuery`

### Installation

> ⚠️ **The `useSuspenseQuery` hook is currently at the [beta stage](https://www.apollographql.com/docs/resources/product-launch-stages/#alpha--beta) in Apollo Client.** If you have feedback on it, please let us know via [GitHub issues](https://github.com/apollographql/apollo-client/issues/new?assignees=&labels=&template=bug.md).

Apollo Client has beta support for the `useSuspenseQuery` hook, which works with React's [Suspense](https://react.dev/reference/react/Suspense) feature. You can install it via `npm install @apollo/client@beta`.

### Using `useSuspenseQuery`

Create and provide a `SuspenseCache` instance to your `ApolloProvider`.

```js
import { SuspenseCache } from '@apollo/client';

const suspenseCache = new SuspenseCache();

<ApolloProvider suspenseCache={suspenseCache} />;
```

Write queries using `useSuspenseQuery`. Ensure the component is wrapped with React's [`Suspense`](https://react.dev/reference/react/Suspense) component. Note that the hook returns only `data` and `error`: since Suspense provides the tools to manage our application's loading states, `useSuspenseQuery` does not return a `loading` boolean.

See the [API reference](#usesuspensequery-api) for supported options.

```jsx
import { Suspense } from 'react';
import { useSuspenseQuery } from '@apollo/client';

const listQuery = gql`
  query {
    list {
      id
    }
  }
`;

function App() {
  return (
    <Suspense fallback={<Spinner />}>
      <List />
    </Suspense>
  );
}

function List() {
  const { data } = useSuspenseQuery(listQuery);

  return (
    <ol>
      {data.list.map(item => <Item key={item.id} id={item.id}/>)}
    </ol>
  );
}

```

### `useSuspenseQuery` API

#### Function Signature

```ts
function useSuspenseQuery<
  TData = any,
  TVariables extends OperationVariables = OperationVariables
>(
  query: DocumentNode,
  options?: SuspenseQueryHookOptions<TData, TVariables>,
): UseSuspenseQueryResult<TData, TVariables> {}
```

#### Params

##### `query`

| Param   | Type         | Description                                                   |
| ------- | ------------ | ------------------------------------------------------------- |
| `query` | DocumentNode | A GraphQL query document parsed into an AST by `gql`. |


##### `options`

<UseSuspenseQueryOptions />

#### Result

<UseSuspenseQueryResult />
